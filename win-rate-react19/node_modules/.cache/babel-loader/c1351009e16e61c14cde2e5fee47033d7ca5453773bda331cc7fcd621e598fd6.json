{"ast":null,"code":"var _jsxFileName = \"/Users/niwa_kazuhiro/Documents/PrivateDevelop/win-rate-react19/src/SubmitForm.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport { useFormStatus } from \"react-dom\";\nimport { useOptimistic } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nasync function submitForm(query) {\n  await new Promise(res => setTimeout(res, 1000));\n  return query.get(\"username\");\n}\n\n// SubmitItems -> used within SubmitUserNameForm\nfunction SubmitItems({\n  items,\n  sendFunction\n}) {\n  _s();\n  const formRef = useRef(null);\n  const [optimisticItems, addOptimisticItem] = useOptimistic(items, (state, newItem) => [...state, newItem] // Add new username optimistically\n  );\n  async function formAction(formData) {\n    var _formRef$current;\n    const username = formData.get(\"username\");\n    addOptimisticItem(username); // Optimistically add the username\n    (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.reset();\n    await sendFunction(formData); // Send form data to the parent\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [optimisticItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [item, /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \" (Sending...)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 11\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: formRef,\n      onSubmit: async e => {\n        e.preventDefault();\n        const formData = new FormData(formRef.current);\n        await formAction(formData);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"Enter Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(SubmitItems, \"Lcg/+2DR58AoNYmCaZNMJIcZhbU=\", false, function () {\n  return [useOptimistic];\n});\n_c = SubmitItems;\nfunction SubmitUserNameForm() {\n  _s2();\n  const {\n    pending,\n    data\n  } = useFormStatus();\n  const [names, setNames] = useState([]);\n\n  // Get the 'username' value from the FormData\n  const viewData = data === null || data === void 0 ? void 0 : data.get(\"username\");\n  async function sendNames(formData) {\n    const sentName = await submitForm(formData);\n    setNames(names => [...names, sentName]);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [pending && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Submitting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(SubmitItems, {\n      items: names,\n      sendFunction: sendNames\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s2(SubmitUserNameForm, \"M5No+p5BQbpeNV1vOoqWMmJYG0g=\", false, function () {\n  return [useFormStatus];\n});\n_c2 = SubmitUserNameForm;\nexport function SubmitInput() {\n  _s3();\n  const ref = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    ref: ref,\n    onSubmit: async e => {\n      var _ref$current;\n      e.preventDefault();\n      const formData = new FormData(ref.current);\n      await submitForm(formData);\n      (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.reset();\n    },\n    children: /*#__PURE__*/_jsxDEV(SubmitUserNameForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s3(SubmitInput, \"QMBuJFIdzLIeqBcFwhMf246mjOM=\");\n_c3 = SubmitInput;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SubmitItems\");\n$RefreshReg$(_c2, \"SubmitUserNameForm\");\n$RefreshReg$(_c3, \"SubmitInput\");","map":{"version":3,"names":["React","useRef","useState","useFormStatus","useOptimistic","jsxDEV","_jsxDEV","Fragment","_Fragment","submitForm","query","Promise","res","setTimeout","get","SubmitItems","items","sendFunction","_s","formRef","optimisticItems","addOptimisticItem","state","newItem","formAction","formData","_formRef$current","username","current","reset","children","map","item","index","fileName","_jsxFileName","lineNumber","columnNumber","ref","onSubmit","e","preventDefault","FormData","type","name","placeholder","_c","SubmitUserNameForm","_s2","pending","data","names","setNames","viewData","sendNames","sentName","_c2","SubmitInput","_s3","_ref$current","_c3","$RefreshReg$"],"sources":["/Users/niwa_kazuhiro/Documents/PrivateDevelop/win-rate-react19/src/SubmitForm.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { useFormStatus } from \"react-dom\";\nimport { useOptimistic } from \"react\";\n\nasync function submitForm(query: FormData) {\n  await new Promise((res) => setTimeout(res, 1000));\n  return query.get(\"username\");\n}\n\n// SubmitItems -> used within SubmitUserNameForm\nfunction SubmitItems({\n  items,\n  sendFunction,\n}: {\n  items: string[];\n  sendFunction: (formData: FormData) => void;\n}) {\n  const formRef = useRef<HTMLFormElement>(null);\n  const [optimisticItems, addOptimisticItem] = useOptimistic<string[]>(\n    items,\n    (state, newItem) => [...state, newItem] // Add new username optimistically\n  );\n\n  async function formAction(formData: FormData) {\n    const username = formData.get(\"username\") as string;\n    addOptimisticItem(username); // Optimistically add the username\n    formRef.current?.reset();\n    await sendFunction(formData); // Send form data to the parent\n  }\n\n  return (\n    <>\n      {optimisticItems.map((item, index) => (\n        <div key={index}>\n          {item}\n          <small> (Sending...)</small>\n        </div>\n      ))}\n      <form ref={formRef} onSubmit={async (e) => {\n        e.preventDefault();\n        const formData = new FormData(formRef.current!);\n        await formAction(formData);\n      }}>\n        <input type=\"text\" name=\"username\" placeholder=\"Enter Username\" />\n        <button type=\"submit\">Send</button>\n      </form>\n    </>\n  );\n}\n\nfunction SubmitUserNameForm() {\n  const { pending, data } = useFormStatus();\n  const [names, setNames] = useState<string[]>([]);\n\n  // Get the 'username' value from the FormData\n  const viewData = data?.get(\"username\");\n\n  async function sendNames(formData: FormData) {\n    const sentName = await submitForm(formData);\n    setNames((names) => [...names, sentName!]);\n  }\n\n  return (\n    <div>\n      {/* Show pending state in the form */}\n      {pending && <p>Submitting...</p>}\n      <SubmitItems items={names} sendFunction={sendNames} />\n    </div>\n  );\n}\n\nexport function SubmitInput() {\n  const ref = useRef<HTMLFormElement>(null);\n\n  return (\n    <form\n      ref={ref}\n      onSubmit={async (e) => {\n        e.preventDefault();\n        const formData = new FormData(ref.current!);\n        await submitForm(formData);\n        ref.current?.reset();\n      }}\n    >\n      <SubmitUserNameForm />\n    </form>\n  );\n}\n"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC/C,SAASC,aAAa,QAAQ,WAAW;AACzC,SAASC,aAAa,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtC,eAAeC,UAAUA,CAACC,KAAe,EAAE;EACzC,MAAM,IAAIC,OAAO,CAAEC,GAAG,IAAKC,UAAU,CAACD,GAAG,EAAE,IAAI,CAAC,CAAC;EACjD,OAAOF,KAAK,CAACI,GAAG,CAAC,UAAU,CAAC;AAC9B;;AAEA;AACA,SAASC,WAAWA,CAAC;EACnBC,KAAK;EACLC;AAIF,CAAC,EAAE;EAAAC,EAAA;EACD,MAAMC,OAAO,GAAGlB,MAAM,CAAkB,IAAI,CAAC;EAC7C,MAAM,CAACmB,eAAe,EAAEC,iBAAiB,CAAC,GAAGjB,aAAa,CACxDY,KAAK,EACL,CAACM,KAAK,EAAEC,OAAO,KAAK,CAAC,GAAGD,KAAK,EAAEC,OAAO,CAAC,CAAC;EAC1C,CAAC;EAED,eAAeC,UAAUA,CAACC,QAAkB,EAAE;IAAA,IAAAC,gBAAA;IAC5C,MAAMC,QAAQ,GAAGF,QAAQ,CAACX,GAAG,CAAC,UAAU,CAAW;IACnDO,iBAAiB,CAACM,QAAQ,CAAC,CAAC,CAAC;IAC7B,CAAAD,gBAAA,GAAAP,OAAO,CAACS,OAAO,cAAAF,gBAAA,uBAAfA,gBAAA,CAAiBG,KAAK,CAAC,CAAC;IACxB,MAAMZ,YAAY,CAACQ,QAAQ,CAAC,CAAC,CAAC;EAChC;EAEA,oBACEnB,OAAA,CAAAE,SAAA;IAAAsB,QAAA,GACGV,eAAe,CAACW,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,kBAC/B3B,OAAA;MAAAwB,QAAA,GACGE,IAAI,eACL1B,OAAA;QAAAwB,QAAA,EAAO;MAAa;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA,GAFpBJ,KAAK;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAGV,CACN,CAAC,eACF/B,OAAA;MAAMgC,GAAG,EAAEnB,OAAQ;MAACoB,QAAQ,EAAE,MAAOC,CAAC,IAAK;QACzCA,CAAC,CAACC,cAAc,CAAC,CAAC;QAClB,MAAMhB,QAAQ,GAAG,IAAIiB,QAAQ,CAACvB,OAAO,CAACS,OAAQ,CAAC;QAC/C,MAAMJ,UAAU,CAACC,QAAQ,CAAC;MAC5B,CAAE;MAAAK,QAAA,gBACAxB,OAAA;QAAOqC,IAAI,EAAC,MAAM;QAACC,IAAI,EAAC,UAAU;QAACC,WAAW,EAAC;MAAgB;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAClE/B,OAAA;QAAQqC,IAAI,EAAC,QAAQ;QAAAb,QAAA,EAAC;MAAI;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/B,CAAC;EAAA,eACP,CAAC;AAEP;AAACnB,EAAA,CAtCQH,WAAW;EAAA,QAQ2BX,aAAa;AAAA;AAAA0C,EAAA,GARnD/B,WAAW;AAwCpB,SAASgC,kBAAkBA,CAAA,EAAG;EAAAC,GAAA;EAC5B,MAAM;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAG/C,aAAa,CAAC,CAAC;EACzC,MAAM,CAACgD,KAAK,EAAEC,QAAQ,CAAC,GAAGlD,QAAQ,CAAW,EAAE,CAAC;;EAEhD;EACA,MAAMmD,QAAQ,GAAGH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEpC,GAAG,CAAC,UAAU,CAAC;EAEtC,eAAewC,SAASA,CAAC7B,QAAkB,EAAE;IAC3C,MAAM8B,QAAQ,GAAG,MAAM9C,UAAU,CAACgB,QAAQ,CAAC;IAC3C2B,QAAQ,CAAED,KAAK,IAAK,CAAC,GAAGA,KAAK,EAAEI,QAAQ,CAAE,CAAC;EAC5C;EAEA,oBACEjD,OAAA;IAAAwB,QAAA,GAEGmB,OAAO,iBAAI3C,OAAA;MAAAwB,QAAA,EAAG;IAAa;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAChC/B,OAAA,CAACS,WAAW;MAACC,KAAK,EAAEmC,KAAM;MAAClC,YAAY,EAAEqC;IAAU;MAAApB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnD,CAAC;AAEV;AAACW,GAAA,CAnBQD,kBAAkB;EAAA,QACC5C,aAAa;AAAA;AAAAqD,GAAA,GADhCT,kBAAkB;AAqB3B,OAAO,SAASU,WAAWA,CAAA,EAAG;EAAAC,GAAA;EAC5B,MAAMpB,GAAG,GAAGrC,MAAM,CAAkB,IAAI,CAAC;EAEzC,oBACEK,OAAA;IACEgC,GAAG,EAAEA,GAAI;IACTC,QAAQ,EAAE,MAAOC,CAAC,IAAK;MAAA,IAAAmB,YAAA;MACrBnB,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,MAAMhB,QAAQ,GAAG,IAAIiB,QAAQ,CAACJ,GAAG,CAACV,OAAQ,CAAC;MAC3C,MAAMnB,UAAU,CAACgB,QAAQ,CAAC;MAC1B,CAAAkC,YAAA,GAAArB,GAAG,CAACV,OAAO,cAAA+B,YAAA,uBAAXA,YAAA,CAAa9B,KAAK,CAAC,CAAC;IACtB,CAAE;IAAAC,QAAA,eAEFxB,OAAA,CAACyC,kBAAkB;MAAAb,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAClB,CAAC;AAEX;AAACqB,GAAA,CAhBeD,WAAW;AAAAG,GAAA,GAAXH,WAAW;AAAA,IAAAX,EAAA,EAAAU,GAAA,EAAAI,GAAA;AAAAC,YAAA,CAAAf,EAAA;AAAAe,YAAA,CAAAL,GAAA;AAAAK,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}