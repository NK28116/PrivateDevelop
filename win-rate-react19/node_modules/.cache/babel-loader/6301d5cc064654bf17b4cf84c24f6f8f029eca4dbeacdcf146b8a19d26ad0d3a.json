{"ast":null,"code":"var _jsxFileName = \"/Users/niwa_kazuhiro/Documents/PrivateDevelop/win-rate-react19/src/SubmitForm.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useFormStatus } from \"react-dom\";\nimport { useOptimistic, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nasync function submitForm(query) {\n  await new Promise(res => setTimeout(res, 1000));\n  return query;\n}\n\n//submitItems-> SubmitUserNameForm内で使う\nfunction submitItems({\n  items,\n  sendItem\n}) {\n  _s();\n  const formRef = useRef();\n  const [optimisticItems, addOptimisticItem] = useOptimistic(items, (state, newItem) => [...state, {\n    text: newItem,\n    sending: true\n  }]);\n  async function formAction(formData) {\n    addOptimisticItem(formData.get(\"message\"));\n    formRef.current.reset();\n    await sendItem(formData);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [optimisticItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [item.text, !!item.sending && /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \" (Sending...)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 30\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"form\", {\n      action: formAction,\n      ref: formRef,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"message\",\n        placeholder: \"Hello!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n///placeHolder\n_s(submitItems, \"Lcg/+2DR58AoNYmCaZNMJIcZhbU=\", false, function () {\n  return [useOptimistic];\n});\nfunction SubmitUserNameForm() {\n  _s2();\n  const {\n    pending,\n    data\n  } = useFormStatus();\n\n  //placeHolderにinputされたdata の中の\"username\"を取得\n  const viewData = data === null || data === void 0 ? void 0 : data.get(\"username\");\n  console.log(\"data\", viewData);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(SubmitItems, {\n      items: viewData,\n      sendItem: submitForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n_s2(SubmitUserNameForm, \"J/2Wr/H+PRkFQJ5+36sW4Xec7aE=\", false, function () {\n  return [useFormStatus];\n});\n_c = SubmitUserNameForm;\nexport function SubmitInput() {\n  _s3();\n  const ref = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    ref: ref,\n    action: async formData => {\n      await submitForm(formData);\n      ref.current.reset();\n    },\n    children: /*#__PURE__*/_jsxDEV(SubmitUserNameForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s3(SubmitInput, \"QMBuJFIdzLIeqBcFwhMf246mjOM=\");\n_c2 = SubmitInput;\nvar _c, _c2;\n$RefreshReg$(_c, \"SubmitUserNameForm\");\n$RefreshReg$(_c2, \"SubmitInput\");","map":{"version":3,"names":["useFormStatus","useOptimistic","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","submitForm","query","Promise","res","setTimeout","submitItems","items","sendItem","_s","formRef","optimisticItems","addOptimisticItem","state","newItem","text","sending","formAction","formData","get","current","reset","children","map","item","index","fileName","_jsxFileName","lineNumber","columnNumber","action","ref","type","name","placeholder","SubmitUserNameForm","_s2","pending","data","viewData","console","log","SubmitItems","_c","SubmitInput","_s3","_c2","$RefreshReg$"],"sources":["/Users/niwa_kazuhiro/Documents/PrivateDevelop/win-rate-react19/src/SubmitForm.tsx"],"sourcesContent":["import { useFormStatus } from \"react-dom\";\nimport {useOptimistic, useRef } from \"react\";\nasync function submitForm(query:FormData) {\n    await new Promise((res) => setTimeout(res, 1000));\n    return query;\n}\n\n//submitItems-> SubmitUserNameForm内で使う\nfunction submitItems({items,sendItem}:{items:String,sendItem:Function}) {\n const formRef = useRef();\n\n  const [optimisticItems, addOptimisticItem] = useOptimistic(\n    items,\n    (state, newItem) => [\n      ...state,\n      {\n        text: newItem,\n        sending: true\n      }\n    ]\n  );\n  async function formAction(formData: FormData) {\n    addOptimisticItem(formData.get(\"message\"));\n    formRef.current.reset();\n    await sendItem(formData);\n  }\n\n  return (\n    <>\n      {optimisticItems.map((item, index) => (\n        <div key={index}>\n          {item.text}\n          {!!item.sending && <small> (Sending...)</small>}\n        </div>\n      ))}\n      <form action={formAction} ref={formRef}>\n        <input type=\"text\" name=\"message\" placeholder=\"Hello!\" />\n        <button type=\"submit\">Send</button>\n      </form>\n    </>\n  );\n}\n\n///placeHolder\nfunction SubmitUserNameForm() {\n    const { pending, data } = useFormStatus();\n\n    //placeHolderにinputされたdata の中の\"username\"を取得\n    const viewData=data?.get(\"username\")\n    console.log(\"data\",viewData);\n\n    return (\n        <div>\n            <SubmitItems items={viewData} sendItem={submitForm} />\n        </div>\n    );\n}\n\nexport  function SubmitInput() {\n    const ref = useRef<HTMLFormElement>(null!);\n    return (\n        <form\n            ref={ref}\n            action={async (formData) => {\n            await submitForm(formData);\n            ref.current.reset();\n            }}\n        >\n        <SubmitUserNameForm />\n        </form>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}